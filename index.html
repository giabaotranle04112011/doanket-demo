<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="keywords" content="Trường THCS Đoàn Kết, Quảng Ngãi, tuyển sinh, giáo dục, học sinh, tin tức trường học, khen thưởng, thành tích">
  <meta name="description" content="Cổng thông tin điện tử Trường THCS Đoàn Kết, Ia Chim, Quảng Ngãi. Cập nhật tin tức, tuyển sinh, hoạt động giáo dục và khen thưởng thành tích." />
  <meta property="og:title" content="Trường THCS Đoàn Kết - Ia Chim, Quảng Ngãi">
  <meta property="og:description" content="Cổng thông tin điện tử Trường THCS Đoàn Kết, Ia Chim, Quảng Ngãi. Cập nhật tin tức, tuyển sinh, hoạt động và khen thưởng." />
  <meta property="og:image" content="https://yourdomain.com/logo.webp">
  <meta property="og:image:alt" content="Logo Trường THCS Đoàn Kết">
  <meta property="og:url" content="https://yourdomain.com">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image:alt" content="Logo Trường THCS Đoàn Kết">
  <meta name="robots" content="index, follow">
  <title>Trường THCS Đoàn Kết - Ia Chim, Quảng Ngãi</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0f19;
      --card: #12192b;
      --muted: #93a4c3;
      --text: #eaf1ff;
      --accent: #4f9cff;
      --accent-2: #9b8cff;
      --success: #00e6a8;
      --danger: #ff6b6b;
      --radius: 20px;
      --shadow: 0 10px 30px rgba(0,0,0,.28);
      --glass: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    :root.light {
      --bg: #f5f7fa;
      --card: #fff;
      --muted: #6b7280;
      --text: #1f2937;
      --accent: #2563eb;
      --accent-2: #7c3aed;
    }

    /* Reset & base */
    *, *::before, *::after { box-sizing: border-box; }
    html { font-family: "Be Vietnam Pro", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial; font-size: 16px; line-height: 1.5; }
    body { margin: 0; color: var(--text); background: 
      radial-gradient(1200px 600px at 10% -10%, rgba(79,156,255,.18), transparent 40%),
      radial-gradient(900px 500px at 110% 10%, rgba(155,140,255,.14), transparent 55%),
      var(--bg); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    a { color: inherit; text-decoration: none; }
    .container { width: min(1200px, 92vw); margin-inline: auto; }

    /* Header / Nav */
    header { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(120%) blur(10px); background: linear-gradient(180deg, rgba(10,14,24,.78), rgba(10,14,24,.45)); border-bottom: 1px solid rgba(255,255,255,.06); }
    .nav { display: flex; align-items: center; gap: 18px; padding: 12px 0; }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 800; }
    .brand .logo { width: 40px; height: 40px; border-radius: 12px; background: conic-gradient(from 180deg, var(--accent), var(--accent-2), var(--success)); box-shadow: 0 6px 14px rgba(79,156,255,.22); flex: 0 0 40px; }
    nav a { opacity: .95; padding: 8px 12px; border-radius: 12px; transition: background .18s, transform .12s; }
    nav a:hover, nav a:focus { background: rgba(255,255,255,.04); outline: none; transform: translateY(-1px); }

    /* CTA */
    .cta { display: inline-flex; align-items: center; gap: 8px; background: var(--glass); border: 1px solid rgba(255,255,255,.12); padding: 10px 14px; border-radius: 12px; transition: transform .18s; }
    .cta:focus, .cta:hover { transform: translateY(-2px); outline: none; }

    /* Mobile nav */
    .mobile-nav { position: fixed; top: 0; right: -100%; height: 100%; width: 280px; background: var(--card); padding: 20px; display: flex; flex-direction: column; gap: 12px; transition: right .28s ease; z-index: 100; }
    .mobile-nav.active { right: 0; }
    .mobile-nav a { padding: 12px; border-radius: 10px; }
    .mobile-nav a:focus, .mobile-nav a:hover { background: var(--accent); color: var(--card); outline: none; }
    .mobile-nav .close-btn { align-self: flex-end; padding: 8px 10px; background: var(--danger); border-radius: 10px; color: var(--card); cursor: pointer; border: none; }

    /* Ticker */
    .ticker { background: linear-gradient(90deg, rgba(79,156,255,.12), rgba(155,140,255,.12)); border-block: 1px solid rgba(255,255,255,.04); overflow: hidden; }
    .ticker-inner { display: flex; gap: 28px; white-space: nowrap; padding: 8px 0; animation: marquee 20s linear infinite; }
    .ticker-inner:hover { animation-play-state: paused; }
    .ticker .tag { display: inline-block; margin-right: 10px; padding: 2px 8px; border-radius: 999px; background: rgba(0,230,168,.12); color: var(--success); font-weight: 700; font-size: 12px; border: 1px solid rgba(0,230,168,.24); }
    @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

    /* Hero */
    .hero { padding: 56px 0 80px; }
    .hero .wrap { display: grid; grid-template-columns: 1.1fr .9fr; gap: 32px; align-items: center; }
    .badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; border: 1px dashed rgba(255,255,255,.08); font-size: 13px; opacity: .95; }
    .h1 { font-size: clamp(28px, 3.6vw, 44px); margin: 14px 0 12px; line-height: 1.05; }
    .lead { font-size: clamp(14px, 1.6vw, 18px); color: var(--muted); }

    /* Cards / Stats */
    .hero-card, .card { background: var(--glass); border: 1px solid rgba(255,255,255,.08); padding: 16px; border-radius: var(--radius); box-shadow: var(--shadow); transition: transform .22s; }
    .hero-card:hover, .card:hover { transform: translateY(-4px); }
    .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 14px; }
    .stat { background: rgba(255,255,255,.02); border: 1px solid rgba(255,255,255,.06); padding: 12px; border-radius: 12px; text-align: center; transition: transform .18s; }
    .stat b { display: block; font-size: 20px; }
    .stat:hover { transform: scale(1.03); }

    /* Hero illustration */
    .hero-ill { height: 320px; border-radius: var(--radius); position: relative; overflow: hidden; background: radial-gradient(650px 220px at 50% -20%, rgba(79,156,255,.24), transparent); }
    .orbit { position: absolute; inset: 0; pointer-events: none; }
    .orb { position: absolute; border-radius: 50%; filter: blur(8px); opacity: .85; transition: transform .22s; }
    .orb.blue { background: radial-gradient(circle at 30% 30%, rgba(79,156,255,.9), rgba(79,156,255,.04)); width: 110px; height: 110px; left: 8%; top: 16%; }
    .orb.purple { background: radial-gradient(circle at 30% 30%, rgba(155,140,255,.88), rgba(155,140,255,.04)); width: 150px; height: 150px; right: 12%; top: 8%; }
    .orb.green { background: radial-gradient(circle at 30% 30%, rgba(0,230,168,.9), rgba(0,230,168,.04)); width: 110px; height: 110px; left: 36%; bottom: 8%; }

    /* Sections / layout */
    section { padding: 48px 0; }
    .section-title { display: flex; align-items: end; justify-content: space-between; gap: 16px; margin-bottom: 18px; }
    .section-title h2 { margin: 0; font-size: 1.25rem; }
    .section-title p { margin: 0; color: var(--muted); }
    .grid { display: grid; gap: 14px; }
    .grid-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-4 { grid-template-columns: repeat(4, 1fr); }

    /* News / gallery */
    .news img { width: 100%; height: 160px; object-fit: cover; display: block; }
    .news h3 { margin: 8px 0 6px; font-size: 1.05rem; }
    .news p { margin: 0; color: var(--muted); }
    .gallery { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; }
    .gallery img { width: 100%; height: 120px; object-fit: cover; border-radius: 12px; border: 1px solid rgba(255,255,255,.08); }

    /* Admissions / forms */
    .admissions { display: grid; grid-template-columns: 1fr .95fr; gap: 20px; align-items: center; }
    .step { display: flex; gap: 12px; align-items: flex-start; background: rgba(255,255,255,.02); border: 1px solid rgba(255,255,255,.06); border-radius: 12px; padding: 12px; }
    .step .num { width: 34px; height: 34px; border-radius: 10px; display: grid; place-items: center; background: rgba(79,156,255,.12); border: 1px solid rgba(79,156,255,.28); font-weight: 700; }

    /* Timeline / calendar */
    .timeline { display: grid; gap: 12px; }
    .tl-item { display: grid; grid-template-columns: 120px 1fr; gap: 12px; align-items: start; }
    .tl-item .bubble { background: rgba(255,255,255,.02); border: 1px solid rgba(255,255,255,.06); border-radius: 12px; padding: 12px; }
    #calendar { max-width: 900px; margin: 18px auto; }

    /* Footer */
    footer { padding: 36px 0 60px; background: linear-gradient(180deg, rgba(10,14,24,.8), rgba(10,14,24,.9)); border-top: 1px solid rgba(255,255,255,.06); }
    .cols { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 20px; }
    .copy { margin-top: 14px; color: var(--muted); font-size: 14px; }

    /* Utility */
    .muted { color: var(--muted); }
    .hidden { display: none; }
    .chip { display: inline-flex; align-items: center; gap: 8px; font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.08); background: rgba(255,255,255,.02); }

    /* Accessibility & perf */
    :root { --reduced-motion: 0; }
    @media (prefers-reduced-motion: reduce) { * { animation-duration: 0.001ms !important; transition-duration: 0.001ms !important; scroll-behavior: auto; } :root { --reduced-motion: 1; } }
    @media (max-width: 980px) {
      .hero .wrap, .admissions { grid-template-columns: 1fr; }
      .grid-3 { grid-template-columns: 1fr; }
      .grid-4 { grid-template-columns: 1fr 1fr; }
      .gallery { grid-template-columns: repeat(3, 1fr); }
      .cols { grid-template-columns: 1fr 1fr; }
      nav { display: none; }
      .mobile { display: initial; }
    }

    /* Compact overrides for added blocks */
    #teacher-reviews, #about-school { padding: 1.5rem; background: var(--card); border-radius: 12px; margin: 1.5rem auto; box-shadow: 0 6px 18px rgba(0,0,0,.08); }
    .reviews-container { display: grid; gap: 1rem; }
    .review-card { padding: 1rem; border-radius: 10px; background: var(--card); border: 1px solid rgba(255,255,255,.04); }
    .review-card .stars { color: gold; font-size: 1.1rem; }
    #reviewForm { display: flex; flex-direction: column; gap: .5rem; }
    #reviewForm input, #reviewForm select, #reviewForm textarea { padding: .6rem; border-radius: 8px; border: 1px solid rgba(255,255,255,.06); background: transparent; color: var(--text); }
    #reviewForm button { background: var(--accent); color: #fff; padding: .7rem; border: none; border-radius: 8px; cursor: pointer; }
    .error-message { background: rgba(255,75,75,.08); border: 1px solid var(--danger); padding: 10px; border-radius: 8px; color: var(--danger); font-size: 14px; }

    /* FullCalendar theme hooks */
    .fc { --fc-border-color: rgba(255,255,255,.08); --fc-event-bg: var(--accent); }
    .fc-theme-standard .fc-scrollgrid { background: var(--card); }
    .fc .fc-daygrid-event { background: var(--accent); border-color: var(--accent); color: var(--card); }
    .fc .fc-daygrid-event:hover { background: var(--accent-2); cursor: pointer; }
    .fc .fc-daygrid-event-dot { border-color: var(--success); }

    /* New styles for upgrades */
    .news-filter { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 14px; }
    .news-filter button { padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.04); color: var(--text); cursor: pointer; transition: background .18s; }
    .news-filter button.active { background: var(--accent); color: var(--card); }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.7); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal.active { display: flex; }
    .modal-content { background: var(--card); padding: 20px; border-radius: 12px; max-width: 500px; width: 90%; box-shadow: var(--shadow); }
    .modal-content h3 { margin: 0 0 12px; }
    .modal-content button { background: var(--accent); color: var(--card); padding: 10px; border: none; border-radius: 8px; cursor: pointer; }
  </style>

  <script>
    (function(){
      var loaded = {};
      function loadScript(src, opts){
        if(loaded[src]) return loaded[src];
        loaded[src] = new Promise(function(resolve, reject){
          var s = document.createElement('script');
          s.src = src;
          if(opts && opts.defer) s.defer = true;
          if(opts && opts.async) s.async = true;
          s.onload = resolve;
          s.onerror = reject;
          document.head.appendChild(s);
        });
        return loaded[src];
      }

      function loadIfCalendarVisible(){
        if(!document.getElementById('calendar')) return Promise.resolve();
        return loadScript('https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js', {defer:true})
          .then(function(){ return loadScript('https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/locales-all.global.min.js', {defer:true}); })
          .catch(function(e){ console.warn('FullCalendar failed to load', e); });
      }

      document.addEventListener('DOMContentLoaded', function(){
        var calEl = document.getElementById('calendar');
        if(!calEl) return;
        if('IntersectionObserver' in window){
          var io = new IntersectionObserver(function(entries, obs){
            entries.forEach(function(ent){
              if(ent.isIntersecting){
                loadIfCalendarVisible();
                obs.disconnect();
              }
            });
          }, {rootMargin:'300px'});
          io.observe(calEl);
        } else {
          setTimeout(loadIfCalendarVisible, 1200);
        }
      });
    })();
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "Trường THCS Đoàn Kết",
    "description": "Trường THCS Đoàn Kết tại Ia Chim, Quảng Ngãi — môi trường học tập kỷ cương, thân thiện và sáng tạo.",
    "url": "https://yourdomain.com",
    "logo": "https://yourdomain.com/logo.webp",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Thôn 5, xã Đoàn Kết",
      "addressLocality": "Ia Chim",
      "addressRegion": "Quảng Ngãi",
      "postalCode": "570000"
    },
    "contactPoint": [
      {
        "@type": "ContactPoint",
        "telephone": "+84-34-870-7829",
        "contactType": "Văn phòng",
        "email": "giabaotranle56@gmail.com",
        "availableLanguage": ["Vietnamese"]
      }
    ],
    "sameAs": [
      "https://www.facebook.com/gia.bao.tranle.2025?locale=vi_VN",
      "https://www.youtube.com/",
      "https://zalo.me/0348707829"
    ]
  }
  </script>
</head>
<body>
  <a class="skip-link" href="#main" style="position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden">Bỏ qua sang nội dung chính</a>

  <!-- HEADER -->
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <div>TRƯỜNG ĐOÀN KẾT — IACHIM</div>
          <small class="muted">Cổng thông tin điện tử (VIP)</small>
        </div>
      </div>

      <nav aria-label="Điều hướng chính">
        <a href="#gioithieu">Giới thiệu</a>
        <a href="#tintuc">Tin tức</a>
        <a href="#khenthuong">Khen thưởng</a>
        <a href="#tuyensinh">Tuyển sinh</a>
        <a href="#lich">Lịch</a>
        <a href="#lienhe">Liên hệ</a>
      </nav>

      <nav class="mobile-nav hidden" id="mobileNav" aria-label="Điều hướng di động">
        <button class="close-btn" id="closeMenu" aria-label="Đóng menu">✕ Đóng</button>
        <a href="#gioithieu">Giới thiệu</a>
        <a href="#tintuc">Tin tức</a>
        <a href="#khenthuong">Khen thưởng</a>
        <a href="#tuyensinh">Tuyển sinh</a>
        <a href="#lich">Lịch</a>
        <a href="#lienhe">Liên hệ</a>
      </nav>

      <div style="display:flex;align-items:center;gap:10px">
        <a class="cta" href="#tuyensinh" aria-label="Đăng ký tuyển sinh">Đăng ký tuyển sinh</a>
        <button class="cta" id="themeToggle" aria-label="Chuyển đổi giao diện">🌙</button>
        <button class="cta mobile" id="btnMenu" aria-label="Mở menu">☰</button>
      </div>
    </div>
  </header>

  <!-- TICKER -->
  <div class="ticker" role="region" aria-label="Thông báo nhanh">
    <div class="container">
      <div class="ticker-inner" aria-hidden="false">
        <p><span class="tag">THÔNG BÁO</span> Khai giảng năm học mới dự kiến 05/09 — Phụ huynh theo dõi lịch nhập học.</p>
        <p><span class="tag">TUYỂN SINH</span> Mở nhận hồ sơ trực tuyến lớp 6, 9 — Ưu tiên nộp sớm.</p>
        <p><span class="tag">VINH DANH</span> 12 học sinh đạt giải cấp tỉnh môn Toán, Lý, Hóa.</p>
        <p><span class="tag">KHEN THƯỞNG</span> Tổng kết năm học 2024-2025 với nhiều thành tích xuất sắc.</p>
      </div>
    </div>
  </div>

  <main id="main" role="main">

    <!-- HERO -->
    <section class="hero" id="gioithieu" aria-labelledby="hero-title">
      <div class="container wrap">
        <div>
          <span class="badge">🏫 Trường THCS Đoàn Kết— Ia Chim, Quảng Ngãi</span>
          <h1 class="h1" id="hero-title">Ngôi trường của sự
            <span style="background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent">
              tận tâm
            </span> & đổi mới
          </h1>
          <p class="lead">Môi trường học tập kỷ cương, thân thiện, lấy học sinh làm trung tâm. Giao diện tải nhanh, tối ưu di động, dễ cập nhật nội dung.</p>

          <div class="hero-card" style="margin-top:12px;">
            <div class="cta-row" style="display:flex;gap:8px;flex-wrap:wrap">
              <button type="button" class="btn primary" onclick="document.getElementById('applyForm').scrollIntoView({behavior:'smooth'})" aria-label="Nộp hồ sơ trực tuyến">Nộp hồ sơ trực tuyến</button>
              <a class="btn" href="#tintuc" aria-label="Xem tin mới">Xem tin mới</a>
              <a class="btn success" href="#lienhe" aria-label="Liên hệ Văn phòng">Liên hệ Văn phòng</a>
            </div>

            <div class="stats" role="list" aria-label="Số liệu nhà trường" style="margin-top:1rem; gap:12px;">
              <div class="stat" role="listitem">
                <b id="st1" aria-live="polite">0</b>
                <small>Học sinh</small>
              </div>
              <div class="stat" role="listitem">
                <b id="st2" aria-live="polite">0</b>
                <small>Giáo viên</small>
              </div>
              <div class="stat" role="listitem">
                <b id="st3" aria-live="polite">0</b>
                <small>Phòng học</small>
              </div>
              <div class="stat" role="listitem">
                <strong style="font-size:1.2rem;color:var(--accent)">2005</strong>
                <small>Thành lập</small>
              </div>
            </div>
          </div>
        </div>

        <aside class="hero-ill" aria-hidden="true">
          <div class="orbit">
            <div class="orb blue"></div>
            <div class="orb purple"></div>
            <div class="orb green"></div>
          </div>
        </aside>
      </div>
    </section>

    <!-- Giới thiệu Trường -->
    <section id="about-school" aria-labelledby="about-title">
      <div class="container">
        <div class="section-title">
          <h2 id="about-title">Giới thiệu Trường</h2>
          <p class="muted">Tầm nhìn, sứ mệnh và một vài con số tiêu biểu</p>
        </div>

        <article class="card about-container" role="region" aria-label="Giới thiệu Trường THCS Đoàn Kết" style="display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap">
          <picture class="school-img" style="flex:1 1 320px;max-width:420px;overflow:hidden;border-radius:12px;">
            <source srcset="truong-large.jpg 1200w, truong.jpg 800w" sizes="(min-width:980px) 420px, 100vw">
            <img src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4nq6x1iBKvnb-u7hm8-bfZyrqZfVzuC9hF2Oq4gwIiS3eIfaafUqaa2ePIg3Awh0d4BNDDdpw8zLigArarW5gHDvNeyBxRZxKbFrAOy0bDzwyqOdvwDKvEZOqTPFUu2KJxdcIx5eGA=s680-w680-h510-rw"
                 alt="Toàn cảnh Trường THCS Đoàn Kết" loading="lazy" decoding="async" style="width:100%;height:auto;display:block;">
          </picture>

          <div style="flex:2 1 480px;min-width:260px;">
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
              <span class="chip" style="background:rgba(79,156,255,.08);border-color:rgba(79,156,255,.22)">🏫 Trường THCS Đoàn Kết</span>
              <small class="muted">Ia Chim — Quảng Ngãi</small>
            </div>

            <h3 style="margin-top:0;margin-bottom:8px">Ngôi trường của truyền thống và đổi mới</h3>

            <p class="muted" style="margin-bottom:12px;line-height:1.6">
              Trường THCS Đoàn Kết có bề dày truyền thống, luôn nỗ lực nâng cao chất lượng dạy và học.
              Nhà trường từng bước cải tạo cơ sở vật chất, cập nhật phương pháp giảng dạy hiện đại,
              đồng thời giữ gìn giá trị văn hoá trường học.
            </p>

            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:14px;">
              <div class="stat" style="flex:0 0 120px;text-align:left;padding:10px;border-radius:12px;">
                <small class="muted">Học sinh</small>
                <b aria-live="polite">~272</b>
              </div>
              <div class="stat" style="flex:0 0 120px;text-align:left;padding:10px;border-radius:12px;">
                <small class="muted">Giáo viên</small>
                <b aria-live="polite">~19</b>
              </div>
              <div class="stat" style="flex:0 0 120px;text-align:left;padding:10px;border-radius:12px;">
                <small class="muted">Phòng học</small>
                <b aria-live="polite">~11</b>
              </div>
              <div class="stat" style="flex:0 0 120px;text-align:left;padding:10px;border-radius:12px;">
                <small class="muted">Thành lập</small>
                <b style="color:var(--accent)">2005</b>
              </div>
            </div>

            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px;">
              <div>
                <h4 style="margin:0 0 6px;font-size:15px">Sứ mệnh</h4>
                <p class="muted" style="margin:0;font-size:14px">Giáo dục toàn diện, phát huy năng lực và phẩm chất học sinh.</p>
              </div>
              <div>
                <h4 style="margin:0 0 6px;font-size:15px">Tầm nhìn</h4>
                <p class="muted" style="margin:0;font-size:14px">Trở thành môi trường học tập thân thiện, sáng tạo trong khu vực.</p>
              </div>
            </div>

            <ul style="margin:0 0 14px 18px;color:var(--muted);line-height:1.5">
              <li>Tập trung nâng cấp phòng học và thư viện.</li>
              <li>Đào tạo đội ngũ giáo viên đổi mới phương pháp giảng dạy.</li>
              <li>Khuyến khích hoạt động ngoại khoá, STEM và sáng tạo.</li>
            </ul>

            <div style="display:flex;gap:10px;margin-top:8px;flex-wrap:wrap;">
              <a class="btn primary" href="#tintuc" aria-label="Xem hoạt động trường">Xem hoạt động</a>
              <a class="btn" href="#lienhe" aria-label="Liên hệ nhà trường">Liên hệ ngay</a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- TIN TỨC -->
    <section id="tintuc" aria-labelledby="news-title">
      <div class="container">
        <div class="section-title">
          <h2 id="news-title">Tin tức & Thông báo</h2>
          <input type="search" id="newsSearch" placeholder="Tìm kiếm tin tức..." aria-label="Tìm kiếm tin tức" autocomplete="off" style="padding:8px; border-radius:10px; border:1px solid rgba(255,255,255,.2); background:rgba(255,255,255,.06); color:var(--text)">
        </div>

        <div class="news-filter" role="group" aria-label="Lọc tin tức theo danh mục">
          <button data-filter="all" class="active">Tất cả</button>
          <button data-filter="khai-giang">Khai giảng</button>
          <button data-filter="vinh-danh">Vinh danh</button>
          <button data-filter="stem">STEM</button>
          <button data-filter="tong-ket">Tổng kết</button>
        </div>

        <div role="status" aria-live="polite" style="margin-top:12px;">
          <article class="card" style="display:inline-block; padding:10px 14px; border-radius:12px;">
            <div class="p">
              <span class="chip" itemprop="startDate" content="2025-09-06T07:00:00+07:00">06/09/2025 • 07:00</span>
              <h3 style="margin:8px 0 4px">Khảo sát / kiểm tra Toán &amp; Tiếng Anh &amp; Ngữ Văn</h3>
              <p class="muted" style="margin:0">Bắt đầu lúc 07:00 — Mỗi 1 môn có thời lượng 45 phút.</p>
            </div>
          </article>
        </div>

        <div class="grid grid-3" style="margin-top:14px;">
          <article class="card news" data-category="khai-giang" itemscope itemtype="https://schema.org/NewsArticle">
            <img src="http://placehold.it/400x160?text=Khai+giang" alt="Hình ảnh lễ khai giảng" loading="lazy" decoding="async" itemprop="image" />
            <div class="p">
              <span class="chip" itemprop="datePublished" content="2025-09-05">05/09,06/09</span>
              <h3 itemprop="headline">Lễ khai giảng năm học 2025–2026</h3>
              <p itemprop="description">Chuẩn bị đồng phục, nề nếp xếp hàng, thời gian có mặt 6:45 sáng tại sân trường.</p>
            </div>
          </article>

          <article class="card news" data-category="vinh-danh" itemscope itemtype="https://schema.org/NewsArticle">
            <img src="https://quickshare.samsungcloud.com/ls/public/v1/links/1756909598475LcxRC3h/contents/03c57fb188d211f085e34aeb037a28a2/resized/1280" alt="Hình ảnh vinh danh học sinh" loading="lazy" decoding="async" itemprop="image" />
            <div class="p">
              <span class="chip" itemprop="datePublished" content="2025-08-20">20/08</span>
              <h3 itemprop="headline">Vinh danh học sinh đạt giải cấp tỉnh</h3>
              <p itemprop="description">Danh sách và hình ảnh được cập nhật sớm.</p>
            </div>
          </article>

          <article class="card news" data-category="stem" itemscope itemtype="https://schema.org/NewsArticle">
            <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39245/fck/files/IMG_1897.jpeg" alt="Hình ảnh ngày hội STEM" loading="lazy" decoding="async" itemprop="image" />
            <div class="p">
              <span class="chip" itemprop="datePublished" content="2025-08-15">15/08</span>
              <h3 itemprop="headline">Ngày hội STEM – Sáng tạo không giới hạn</h3>
              <p itemprop="description">Học sinh trưng bày các dự án robot, IoT và sản phẩm khoa học sáng tạo.</p>
            </div>
          </article>

          <article class="card news" data-category="tong-ket" itemscope itemtype="https://schema.org/NewsArticle">
            <img src="http://placehold.it/400x160?text=Tong+ket" alt="Hình ảnh tổng kết năm học" loading="lazy" decoding="async" itemprop="image" />
            <div class="p">
              <span class="chip" itemprop="datePublished" content="2025-05-27">27/05</span>
              <h3 itemprop="headline">Tổng kết phát thưởng năm học 2024-2025</h3>
              <p itemprop="description">Trường tổ chức lễ tổng kết và khen thưởng học sinh, giáo viên có thành tích xuất sắc trong năm học.</p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Đánh giá giáo viên -->
    <section id="teacher-reviews" aria-labelledby="reviews-title">
      <div class="container">
        <div class="section-title">
          <h2 id="reviews-title">Đánh giá Giáo viên</h2>
          <p class="muted">Ý kiến từ phụ huynh và học sinh</p>
        </div>

        <div class="reviews-container">
          <article class="review-card" role="article" aria-label="Đánh giá Thầy Nguyễn Văn A">
            <h3>Thầy Nguyễn Văn A</h3>
            <p><strong>Môn:</strong> Toán</p>
            <div class="stars" aria-hidden="true">⭐⭐⭐⭐⭐</div>
            <p class="comment">Thầy giảng dễ hiểu, ví dụ thực tế, học sinh rất thích.</p>
          </article>

          <article class="review-card" role="article" aria-label="Đánh giá Cô Trần Thị B">
            <h3>Cô Trần Thị B</h3>
            <p><strong>Môn:</strong> Văn</p>
            <div class="stars" aria-hidden="true">⭐⭐⭐⭐</div>
            <p class="comment">Cô giảng nhiệt tình, nhưng tốc độ hơi nhanh.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- KHEN THƯỞNG -->
    <section id="khenthuong" aria-labelledby="rewards-title">
      <div class="container">
        <div class="section-title">
          <h2 id="rewards-title">Khen thưởng & Thành tích</h2>
          <p class="muted">Vinh danh học sinh, giáo viên xuất sắc</p>
        </div>
        <div class="grid grid-3">
          <article class="card">
            <div class="p">
              <h3>Học sinh giỏi cấp tỉnh</h3>
              <p class="muted">Danh sách đang cập nhật</p>
            </div>
          </article>
          <article class="card">
            <div class="p">
              <h3>Khen thưởng nội bộ</h3>
              <p class="muted">Khen thưởng học sinh con cán bộ / thành tích phong trào</p>
            </div>
          </article>
          <article class="card">
            <div class="p">
              <h3>Khen thưởng từ đối tác</h3>
              <p class="muted">Các nguồn hỗ trợ và khen thưởng từ doanh nghiệp địa phương</p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- TUYỂN SINH -->
    <section id="tuyensinh" aria-labelledby="admissions-title">
      <div class="container admissions">
        <div>
          <div class="section-title">
            <h2 id="admissions-title">Tuyển sinh trực tuyến</h2>
            <p class="muted">Đơn giản trong 3 bước</p>
          </div>

          <div class="steps" aria-hidden="false">
            <div class="step"><div class="num">1</div><div>Điền thông tin học sinh & phụ huynh vào biểu mẫu.</div></div>
            <div class="step"><div class="num">2</div><div>Tải lên ảnh/scan học bạ, giấy khai sinh (nếu có).</div></div>
            <div class="step"><div class="num">3</div><div>Nhà trường liên hệ xác nhận trong vòng 3 ngày làm việc.</div></div>
          </div>

          <div class="cta-row" style="margin-top:12px">
            <button class="btn primary" type="button" onclick="document.getElementById('applyForm').scrollIntoView({behavior:'smooth'})" aria-label="Mở biểu mẫu đăng ký">Mở biểu mẫu</button>
            <a class="btn" href="#quydinh" aria-label="Quy định tuyển sinh">Quy định tuyển sinh</a>
          </div>
        </div>

        <div class="card" style="min-width:320px;">
          <div class="p">
            <h3 style="margin:0 0 8px">Biểu mẫu nhanh</h3>
            <form id="applyForm" novalidate>
              <div class="grid" style="grid-template-columns:1fr 1fr; gap:10px">
                <div style="position:relative">
                  <input required name="name" aria-required="true" placeholder="Họ và tên học sinh" aria-label="Họ và tên học sinh" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text);width:100%" />
                  <span class="error-message hidden" data-error="name">Vui lòng nhập họ tên học sinh.</span>
                </div>
                <div style="position:relative">
                  <input required name="grade" aria-required="true" placeholder="Đăng ký lớp (6 hoặc 10)" pattern="^(6|10)$" aria-label="Lớp đăng ký" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text);width:100%" />
                  <span class="error-message hidden" data-error="grade">Lớp phải là 6 hoặc 10.</span>
                </div>
                <div style="position:relative">
                  <input required name="parent" placeholder="Họ tên phụ huynh" aria-label="Họ tên phụ huynh" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text);width:100%" />
                  <span class="error-message hidden" data-error="parent">Vui lòng nhập họ tên phụ huynh.</span>
                </div>
                <div style="position:relative">
                  <input required name="phone" placeholder="Số điện thoại" pattern="[0-9\s()+-]{8,}" aria-label="Số điện thoại" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text);width:100%" />
                  <span class="error-message hidden" data-error="phone">Số điện thoại không hợp lệ.</span>
                </div>
                <input name="email" placeholder="Email (không bắt buộc)" type="email" aria-label="Email" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text)" />
                <input name="address" placeholder="Địa chỉ" aria-label="Địa chỉ" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text)" />
                <input type="file" name="documents" accept=".pdf,.jpg,.png" multiple aria-label="Tải lên học bạ hoặc giấy khai sinh" style="padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text)" />
                <textarea name="note" placeholder="Ghi chú" aria-label="Ghi chú" style="grid-column:1/-1; padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:var(--text);min-height:90px"></textarea>
              </div>

              <div style="display:flex;gap:10px;margin-top:10px;align-items:center">
                <button class="btn success" type="submit" aria-label="Gửi đăng ký">Gửi đăng ký</button>
                <label style="font-size:12px;opacity:.8">
                  <input required type="checkbox" aria-label="Đồng ý với điều khoản" /> Tôi đồng ý với điều khoản xử lý dữ liệu.
                </label>
              </div>

              <p id="applyMsg" class="muted" style="margin-top:8px" aria-live="polite"></p>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- LỊCH & SỰ KIỆN -->
    <section id="lich" aria-labelledby="calendar-title">
      <div class="container">
        <div class="section-title">
          <h2 id="calendar-title">Lịch công tác & Sự kiện</h2>
          <p class="muted">Tuần 01 • 25/08 — 31/08</p>
        </div>

        <div class="timeline" aria-hidden="false">
          <div class="tl-item"><div class="time">Thứ 2</div><div class="bubble">Chào cờ đầu tuần — Triển khai nền nếp năm học.</div></div>
          <div class="tl-item"><div class="time">Thứ 3</div><div class="bubble">Họp tổ chuyên môn — Phân công nhiệm vụ.</div></div>
          <div class="tl-item"><div class="time">Thứ 5</div><div class="bubble">Sinh hoạt CLB STEM — Phòng thí nghiệm 2.</div></div>
          <div class="tl-item"><div class="time">Thứ 7</div><div class="bubble">Lễ phát động phong trào thi đua đầu năm.</div></div>
        </div>

        <div id="calendar" role="region" aria-label="Lịch sự kiện" style="margin-top:14px"></div>
      </div>
    </section>

    <!-- THƯ VIỆN ẢNH -->
    <section aria-labelledby="gallery-title">
      <div class="container">
        <div class="section-title">
          <h2 id="gallery-title">Thư viện ảnh</h2>
          <p class="muted">Khoảnh khắc tiêu biểu</p>
        </div>
        <div class="gallery" role="list">
          <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39238/20210327/163246463_1100361523790271_7010963589764280044_n_e29e676b8a.jpg" alt="Hoạt động trường" loading="lazy" decoding="async" role="listitem" />
          <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39238/20211009/IMG_0218_aae69f44da.jpeg" alt="Sự kiện trường" loading="lazy" decoding="async" role="listitem"/>
          <img src="https://quickshare.samsungcloud.com/ls/public/v1/links/1756909598475LcxRC3h/contents/03c57fb188d211f085e34aeb037a28a2/resized/1280" alt="Học sinh" loading="lazy" decoding="async" role="listitem"/>
          <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39238/20210326/60x90_b35a8ed150.jpg" alt="Lễ hội" loading="lazy" decoding="async" role="listitem"/>
          <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39238/20210326/IMG_9557_-_Copy_89534e095f.jpg" alt="Hoạt động ngoại khóa" loading="lazy" decoding="async" role="listitem"/>
          <img src="http://c12doanket-iachim.quangngai.edu.vn/upload/39238/20210326/IMG_9564_-_Copy_b709199edb.jpg" alt="Sinh hoạt trường" loading="lazy" decoding="async" role="listitem"/>
        </div>
      </div>
    </section>

    <!-- LIÊN HỆ -->
    <section id="lienhe" aria-labelledby="contact-title">
      <div class="container">
        <div class="section-title">
          <h2 id="contact-title">Liên hệ</h2>
          <p class="muted">Trường Đoàn Kết — Ia Chim, Quảng Ngãi</p>
        </div>

        <div class="grid grid-3">
          <div class="card">
            <div class="p">
              <h3 style="margin:0 0 6px">Văn phòng</h3>
              <p class="muted">SĐT: <b>0348707829</b><br>Email: <b>giabaotranle56@gmail.com</b></p>
              <a class="btn" href="tel:+84348707829" aria-label="Gọi văn phòng">Gọi ngay</a>
            </div>
          </div>

          <div class="card">
            <div class="p">
              <h3 style="margin:0 0 6px">Giờ làm việc</h3>
              <p class="muted">T2–T6: 7:30–11:30 • 13:30–17:00<br>T7: 7:30–11:00</p>
            </div>
          </div>

          <div class="card">
            <div class="p">
              <h3 style="margin:0 0 6px">Địa chỉ</h3>
              <p class="muted">Ia Chim, tỉnh Quảng Ngãi (Thôn 5 xã Đoàn Kết)</p>
              <a class="btn" target="_blank" href="https://maps.app.goo.gl/PwmeZRzQmxno9VG98" rel="noopener noreferrer" aria-label="Xem bản đồ">Xem bản đồ</a>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Confirmation Modal -->
  <div class="modal" id="confirmationModal" role="dialog" aria-labelledby="modal-title">
    <div class="modal-content">
      <h3 id="modal-title">Xác nhận đăng ký</h3>
      <p id="modalMessage" class="muted"></p>
      <button onclick="closeModal()" aria-label="Đóng">Đóng</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="cols">
        <div>
          <div class="brand" style="margin-bottom:12px">
            <div class="logo" aria-hidden="true"></div>
            <div class="title">
              <div>TRƯỜNG ĐOÀN KẾT — IACHIM</div>
              <small class="muted">Cổng thông tin điện tử</small>
            </div>
          </div>
          <p class="muted">Web Trường: giao diện hiện đại, hiệu ứng mượt, tối ưu SEO.</p>
          <p class="muted">Được thiết kế bởi Gia Bảo và TLGB TEAM</p>
        </div>

        <div>
          <h4>Chuyên mục</h4>
          <ul>
            <li><a href="#tintuc">Tin tức</a></li>
            <li><a href="#khenthuong">Khen thưởng</a></li>
            <li><a href="#tuyensinh">Tuyển sinh</a></li>
            <li><a href="#lich">Lịch</a></li>
            <li><a href="#lienhe">Liên hệ</a></li>
          </ul>
        </div>

        <div>
          <h4>Tài nguyên</h4>
          <ul>
            <li><a href="#">Văn bản</a></li>
            <li><a href="#">Thời khóa biểu</a></li>
            <li><a href="#">Tải biểu mẫu</a></li>
          </ul>
        </div>

        <div>
          <h4>Mạng xã hội</h4>
          <ul>
            <li><a class="chip" href="https://www.facebook.com/gia.bao.tranle.2025?locale=vi_VN" target="_blank" rel="noopener noreferrer" aria-label="Fanpage Facebook Trường Đoàn Kết">Fanpage Facebook</a></li>
            <li><a class="chip" href="https://www.youtube.com/" target="_blank" rel="noopener noreferrer" aria-label="Kênh YouTube Trường Đoàn Kết">Kênh YouTube</a></li>
            <li><a class="chip" href="https://zalo.me/0348707829" target="_blank" rel="noopener noreferrer" aria-label="Zalo Trường Đoàn Kết">Zalo: 0348707829</a></li>
          </ul>
        </div>
      </div>

      <div class="copy">© <span id="y"></span> Trần Lê Gia Bảo — TLGB TEAM.</div>
    </div>
  </footer>

  <script>
  (function () {
    'use strict';

    // Small dynamic script loader
    const scriptCache = {};
    function loadScript(src, opts = {}) {
      if (scriptCache[src]) return scriptCache[src];
      scriptCache[src] = new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = src;
        if (opts.async) s.async = true;
        if (opts.defer) s.defer = true;
        s.onload = () => resolve();
        s.onerror = (e) => reject(new Error('Failed to load ' + src));
        document.head.appendChild(s);
      });
      return scriptCache[src];
    }

    // Utility: debounce
    function debounce(fn, ms = 250) {
      let t;
      return (...a) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...a), ms);
      };
    }

    // Safe DOM helpers
    function $(sel, ctx = document) { return ctx.querySelector(sel); }
    function $$(sel, ctx = document) { return Array.from(ctx.querySelectorAll(sel)); }

    // Mobile menu accessibility
    const btnMenu = $('#btnMenu');
    const mobileNav = $('#mobileNav');
    const closeMenu = $('#closeMenu');
    if (btnMenu && mobileNav) {
      btnMenu.addEventListener('click', () => {
        mobileNav.classList.add('active');
        const first = mobileNav.querySelector('a, button');
        if (first) first.focus();
      });
    }
    if (closeMenu && mobileNav && btnMenu) {
      closeMenu.addEventListener('click', () => {
        mobileNav.classList.remove('active');
        btnMenu.focus();
      });
    }
    $$('.mobile-nav a').forEach(a => a.addEventListener('click', () => mobileNav && mobileNav.classList.remove('active')));
    if (mobileNav) {
      mobileNav.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          mobileNav.classList.remove('active');
          btnMenu && btnMenu.focus();
        }
      });
    }

    // Counters
    const counters = [{ id: 'st1', value: 272 }, { id: 'st2', value: 19 }, { id: 'st3', value: 11 }];
    counters.forEach(({ id, value }) => {
      const el = document.getElementById(id);
      if (!el) return;
      let cur = 0;
      const duration = 900;
      const steps = Math.max(24, Math.floor(duration / 16));
      const step = Math.max(1, Math.floor(value / steps));
      const iv = setInterval(() => {
        cur += step;
        if (cur >= value) {
          el.textContent = value.toLocaleString('vi-VN');
          clearInterval(iv);
        } else {
          el.textContent = cur.toLocaleString('vi-VN');
        }
      }, Math.max(12, Math.floor(duration / steps)));
    });

    // Reveal on scroll
    const revealObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach(en => {
        if (en.isIntersecting) {
          const t = en.target;
          t.style.opacity = 1;
          t.style.transform = 'translateY(0)';
          obs.unobserve(t);
        }
      });
    }, { threshold: 0.12 });
    $$('.container > *').forEach(el => {
      el.style.opacity = 0.001;
      el.style.transform = 'translateY(12px)';
      el.style.transition = 'all .6s cubic-bezier(.22,1,.36,1)';
      revealObserver.observe(el);
    });

    // Form validation & submission
    const applyForm = document.getElementById('applyForm');
    if (applyForm) {
      const inputs = applyForm.querySelectorAll('input, textarea');
      inputs.forEach(input => {
        input.addEventListener('input', () => {
          const errorEl = applyForm.querySelector(`[data-error="${input.name}"]`);
          if (errorEl) errorEl.classList.add('hidden');
        });
      });

      applyForm.addEventListener('submit', async (ev) => {
        ev.preventDefault();
        const form = new FormData(applyForm);
        const name = (form.get('name') || '').toString().trim();
        const grade = (form.get('grade') || '').toString().trim();
        const parent = (form.get('parent') || '').toString().trim();
        const phone = (form.get('phone') || '').toString().trim();
        const files = applyForm.querySelector('[name="documents"]') ? applyForm.querySelector('[name="documents"]').files : null;
        const msg = document.getElementById('applyMsg');
        if (msg) {
          msg.classList.remove('error-message');
          msg.textContent = '';
        }

        // Real-time validations
        let hasError = false;
        if (!name) {
          showError('name', 'Vui lòng nhập họ tên học sinh.');
          hasError = true;
        }
        if (!['6', '10'].includes(grade)) {
          showError('grade', 'Lớp phải là 6 hoặc 10.');
          hasError = true;
        }
        if (!parent) {
          showError('parent', 'Vui lòng nhập họ tên phụ huynh.');
          hasError = true;
        }
        if (!phone.match(/^[0-9\s()+-]{8,}$/)) {
          showError('phone', 'Số điện thoại không hợp lệ.');
          hasError = true;
        }
        if (files && files.length) {
          let total = 0;
          for (let i = 0; i < files.length; i++) total += files[i].size;
          if (total > 5 * 1024 * 1024) {
            showError('documents', 'Tổng kích thước tệp vượt quá 5MB.');
            hasError = true;
          }
        }
        if (!applyForm.querySelector('[type="checkbox"]').checked) {
          showError('checkbox', 'Vui lòng đồng ý với điều khoản.');
          hasError = true;
        }

        if (hasError) return;

        try {
          if (msg) msg.textContent = '⏳ Đang gửi...';
          await new Promise(r => setTimeout(r, 900));
          showModal(`✅ Đã nhận đăng ký cho ${name}. Nhà trường sẽ liên hệ sớm!`);
          applyForm.reset();
          if (msg) msg.textContent = '';
        } catch (err) {
          showError('general', 'Có lỗi xảy ra khi gửi đăng ký. Vui lòng thử lại.');
        }

        function showError(field, text) {
          const errorEl = applyForm.querySelector(`[data-error="${field}"]`) || document.getElementById('applyMsg');
          if (errorEl) {
            errorEl.textContent = text;
            errorEl.classList.remove('hidden');
            if (errorEl !== msg) errorEl.classList.add('error-message');
          }
        }

        function showModal(message) {
          const modal = document.getElementById('confirmationModal');
          const modalMessage = document.getElementById('modalMessage');
          if (modal && modalMessage) {
            modalMessage.textContent = message;
            modal.classList.add('active');
            modal.querySelector('button').focus();
          }
        }
      });
    }

    // Close modal
    function closeModal() {
      const modal = document.getElementById('confirmationModal');
      if (modal) modal.classList.remove('active');
    }
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Footer year
    const yEl = document.getElementById('y');
    if (yEl) yEl.textContent = new Date().getFullYear();

    // Parallax background
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const y = window.scrollY || window.pageYOffset;
          document.body.style.backgroundPosition = `center ${-y * 0.05}px`;
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });

    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('light');
        const isLight = document.documentElement.classList.contains('light');
        try { localStorage.setItem('theme', isLight ? 'light' : 'dark'); } catch (e) {}
        themeToggle.textContent = isLight ? '🌞' : '🌙';
      });
      if (localStorage.getItem('theme') === 'light') {
        document.documentElement.classList.add('light');
        themeToggle.textContent = '🌞';
      }
    }

    // News search and filter
    const newsSearch = document.getElementById('newsSearch');
    const filterButtons = $$('.news-filter button');
    let activeFilter = 'all';

    if (newsSearch) {
      const doSearch = debounce((q) => {
        const s = q.trim().toLowerCase();
        $$('.news').forEach(article => {
          const matchesSearch = s === '' || article.textContent.toLowerCase().includes(s);
          const matchesFilter = activeFilter === 'all' || article.dataset.category === activeFilter;
          article.style.display = matchesSearch && matchesFilter ? '' : 'none';
        });
      }, 300);
      newsSearch.addEventListener('input', (e) => doSearch(e.target.value || ''));
    }

    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        activeFilter = btn.dataset.filter;
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        $$('.news').forEach(article => {
          const matchesFilter = activeFilter === 'all' || article.dataset.category === activeFilter;
          const matchesSearch = !newsSearch.value.trim() || article.textContent.toLowerCase().includes(newsSearch.value.trim().toLowerCase());
          article.style.display = matchesFilter && matchesSearch ? '' : 'none';
        });
      });
    });

    // Hero parallax
    const heroIll = document.querySelector('.hero-ill');
    if (heroIll) {
      heroIll.addEventListener('mousemove', (e) => {
        const rect = heroIll.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width - 0.5;
        const y = (e.clientY - rect.top) / rect.height - 0.5;
        heroIll.querySelectorAll('.orb').forEach(orb => {
          orb.style.transform = `translate(${x * 18}px, ${y * 18}px)`;
        });
      });
      heroIll.addEventListener('mouseleave', () => {
        heroIll.querySelectorAll('.orb').forEach(orb => orb.style.transform = 'translate(0, 0)');
      });
    }

    // FullCalendar
    (function initCalendar() {
      const calEl = document.getElementById('calendar');
      if (!calEl) return;

      Promise.resolve().then(() => {
        if (window.FullCalendar && window.FullCalendar.Calendar) return;
        return loadScript('https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js', { defer: true })
          .then(() => loadScript('https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/locales-all.global.min.js', { defer: true }));
      }).then(() => {
        if (!window.FullCalendar || !window.FullCalendar.Calendar) {
          throw new Error('FullCalendar did not expose expected API');
        }
        const Calendar = window.FullCalendar.Calendar;
        const calendar = new Calendar(calEl, {
          initialView: 'dayGridMonth',
          locale: 'vi',
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
          },
          events: [
            { title: 'Chào cờ đầu tuần', start: '2025-08-25', description: 'Triển khai nền nếp năm học' },
            { title: 'Họp tổ chuyên môn', start: '2025-08-26', description: 'Phân công nhiệm vụ' },
            { title: 'Sinh hoạt CLB STEM', start: '2025-08-28', description: 'Phòng thí nghiệm 2' },
            { title: 'Lễ phát động thi đua', start: '2025-08-30', description: 'Phong trào thi đua đầu năm' }
          ],
          eventColor: getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#4f9cff',
          eventTextColor: getComputedStyle(document.documentElement).getPropertyValue('--card') || '#fff',
          height: 'auto',
          eventDidMount(info) {
            if (info.event.extendedProps && info.event.extendedProps.description) {
              info.el.setAttribute('aria-label', info.event.title + ': ' + info.event.extendedProps.description);
              info.el.title = info.event.extendedProps.description; // Tooltip for hover
            }
          },
          eventClick(info) {
            showModal(`${info.event.title}: ${info.event.extendedProps.description || 'Không có mô tả.'}`);
          }
        });
        calendar.render();
      }).catch((err) => {
        console.warn('[Calendar] init failed:', err);
        calEl.innerHTML = '<div class="card" style="padding:12px;border-radius:12px;">Không thể tải lịch. Vui lòng thử lại sau.</div>';
      });
    })();
  })();
  </script>
</body>
</html>
